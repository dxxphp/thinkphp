{include file="public/menu" /}


<body class="header-fixed sidebar-fixed sidebar-dark header-light" id="body">
<script>
    NProgress.configure({ showSpinner: false });
    NProgress.start();
</script>

<div class="mobile-sticky-body-overlay"></div>

<div class="wrapper">
    <style>

        .pages{float: right}
        .pages a,.pages span {
            display:inline-block;
            padding:20px 20px;
            border:1px solid #f0f0f0;
            -webkit-border-radius:3px;
            -moz-border-radius:3px;
            border-radius:30px;
            font-size: 14px;
        }
        .pages a,.pages li {

            display:inline-block;
            list-style: none;
            text-decoration:none; color:#58A0D3;
        }
        .pages a.first,.pages a.prev,.pages a.next,.pages a.end{
            margin:0 auto;
        }
        .pages a:hover{
            border-color:#50A8E6;
        }
        .pages span.current{
            background:#50A8E6;
            color:#FFF;
            font-weight:700;
            border-color:#50A8E6;
        }

    </style>
    <!--
====================================
——— LEFT SIDEBAR WITH FOOTER
=====================================
-->
    {include file="public/left" /}

    <div class="page-wrapper">
        <!-- Header -->
        {include file="public/header" /}

        <div class="content-wrapper">
            <div class="content">

                <div class="breadcrumb-wrapper">

                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb p-0">
                            <li class="breadcrumb-item">  </li>


                            <li class="breadcrumb-item">
                                <a href="{:url('home/product/index')}">产品列表</a>
                            </li>
                            <li class="breadcrumb-item">
                                <a href="{:url('home/shop/shop')}">购物车列表</a>
                            </li>
                            <li class="breadcrumb-item">
                                <a href="{:url('home/order/show')}">订单列表</a>
                            </li>

                        </ol>
                    </nav>

                </div>


                <div class="row">
                <div class="col-lg-6">
                    <div class="card card-default">
                        <div class="card-header card-header-border-bottom">
                            <h2>订单详情</h2>
                        </div>
                        <div class="card-body">
                            <form>
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">客户名称：<span class="canChangeOne" id="{$data.id}"><?php echo $data['username'] ?></span></label>
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">客户手机号：<span class="canChangeTwo" id="{$data.id}"><?php echo $data['user_iphone'] ?></span></label>
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">客户地址：<span class="canChangeThree" id="{$data.id}"><?php echo $data['address'] ?></span></label>
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">供应商：<span class="canChangeFour" id="{$data.id}"><?php echo $data['supshop'] ?></span></label>
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">供应商手机号：<span class="canChangeSex" id="{$data.id}"><?php echo $data['iphone'] ?></span></label>
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">采购总计：<span style="color: red;"><?php echo $data['total_purchase'] ?></span> ¥</label>
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">销售总计：<span style="color: red;"><?php echo $data['new_total_price'] ?> </span>¥</label>
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">总计利润：<span style="color: red;"><?php echo $data['profit'] ?> </span> ¥</label>
                                </div>
                                <div class="form-group">
                                    <label for="exampleFormControlInput1">快递单号：<input type="text"></label>
                                </div>

                            </form>
                        </div>
                    </div>


                </div>
                <div class="col-lg-6">
                    {foreach name="shop" item="value"}



                    <div class="card card-default">
                        <div class="card-header card-header-border-bottom">
                            <h2>品牌：  <?php if(!empty($classData[$value['class_id']]['classname'])) { ?>
                                <?= $classData[$value['class_id']]['classname']; ?>
                                <?php }else{ ?>
                                暂无分类
                                <?php } ?></h2>
                        </div>
                        <div class="card-body">
                            <form >

                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="fname">产品名称：</label>
                                            <span style="color: black;font-size: 20px;">{$value.name}</span>
                                        </div
                                        >
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="fnames">数量：</label>
                                            <span style="color: black">{$value.num}</span>
                                        </div>
                                    </div>


                                    <div class="col-sm-9">
                                        <div class="row">
                                            <div class="col-3">
                                                <div class="form-group">
                                                    <label for="State">采购单价:</label>
                                                    <span style="color: black">{$value.purchase} ¥</span>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="form-group">
                                                    <label for="Zip">批发单价:</label>
                                                    <span style="color: black">{$value.new_purchase} ¥</span>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="form-group">
                                                    <label for="Zip">现售单价:</label>
                                                    <span style="color: black">{$value.price} ¥</span>
                                                </div>
                                            </div>
                                            <div class="col-2.5">
                                                <div class="form-group">
                                                    <label for="Zip">现批单价:</label>
                                                    <span style="color: black">{$value.new_price } ¥ </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!--<div class="col-sm-9">-->
                                        <!--<div class="row">-->
                                            <!--<div class="col-3">-->
                                                <!--<div class="form-group">-->
                                                    <!--<label for="State">采购单价:</label>-->
                                                    <!--<span style="color: black">{$value.purchase} ¥</span>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                            <!--<div class="col-3">-->
                                                <!--<div class="form-group">-->
                                                    <!--<label for="Zip">批发单价:</label>-->
                                                    <!--<span style="color: black">{$value.new_purchase} ¥</span>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                            <!--<div class="col-3">-->
                                                <!--<div class="form-group">-->
                                                    <!--<label for="Zip">现售单价:</label>-->
                                                    <!--<span style="color: black">{$value.price} ¥</span>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                            <!--<div class="col-2.5">-->
                                                <!--<div class="form-group">-->
                                                    <!--<label for="Zip">现批单价:</label>-->
                                                    <!--<span style="color: black">{$value.new_price } ¥ </span>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                </div>

                            </form>
                        </div>
                    </div>


                    {/foreach}



                </div>
            </div>
            </div>




        </div>
</body>
</html>
<script>

    //页面修改
    $(document).ready(function(){
        td_Click();
    })
    function td_Click() {
        $(".canChangeOne").click(function () {
            var td = $(this);
            //所点文本框的id
            var id = $(this).attr("id");
            // alert(id);return

            var txt = $.trim(td.text());

            var input = $("<input class=\"myinput\" id='new'  type='text'value='" + txt + "'style=\"width:80px;heigth:20px;\"/>");
            td.html(input);
            input.click(function () {
                return false;
            });
            //获取焦点
            input.trigger("focus");
            //文本框失去焦点后提交内容，重新变为文本
            input.blur(function () {
                // var newtxt = $(this).val();
                var newtxt = $("#new").val();

                // alert(newtxt);return
                //判断文本有没有修改
                if (newtxt != txt) {
                    if (newtxt == null || newtxt == "") {
                        td.html(txt);
                    }
                    else {
                        $.ajax({
                            type: "POST",
                            url: "{:url('home/order/update')}",
                            data: { 'id' : id , 'purchase' : newtxt, 'flas' :1 },  // 等号前后不要加空格


                        });
                        td.html(newtxt);
                    }
                }
                else {
                    td.html(txt);
                }
            });
        });

        $(".canChangeTwo").click(function () {
            var td = $(this);
            //所点文本框的id
            var id = $(this).attr("id");
            // alert(id);return

            var txt = $.trim(td.text());

            var input = $("<input class=\"myinput\" id='new'  type='text'value='" + txt + "'style=\"width:135px;heigth:20px;\"/>");
            td.html(input);
            input.click(function () {
                return false;
            });
            //获取焦点
            input.trigger("focus");
            //文本框失去焦点后提交内容，重新变为文本
            input.blur(function () {
                // var newtxt = $(this).val();
                var newtxt = $("#new").val();

                // alert(newtxt);return
                //判断文本有没有修改
                if (newtxt != txt) {
                    if (newtxt == null || newtxt == "") {
                        td.html(txt);
                    }
                    else {
                        $.ajax({
                            type: "POST",
                            url: "{:url('home/order/update')}",
                            data: { 'id' : id , 'purchase' : newtxt ,'flas' : 2},  // 等号前后不要加空格


                        });
                        td.html(newtxt);
                    }
                }
                else {
                    td.html(txt);
                }
            });
        });
        $(".canChangeThree").click(function () {
            var td = $(this);
            //所点文本框的id
            var id = $(this).attr("id");
            // alert(id);return

            var txt = $.trim(td.text());

            var input = $("<input class=\"myinput\" id='new'  type='text'value='" + txt + "'style=\"width:535px;heigth:20px;\"/>");
            td.html(input);
            input.click(function () {
                return false;
            });
            //获取焦点
            input.trigger("focus");
            //文本框失去焦点后提交内容，重新变为文本
            input.blur(function () {
                // var newtxt = $(this).val();
                var newtxt = $("#new").val();

                // alert(newtxt);return
                //判断文本有没有修改
                if (newtxt != txt) {
                    if (newtxt == null || newtxt == "") {
                        td.html(txt);
                    }
                    else {
                        $.ajax({
                            type: "POST",
                            url: "{:url('home/order/update')}",
                            data: { 'id' : id , 'purchase' : newtxt ,'flas' : 3},  // 等号前后不要加空格


                        });
                        td.html(newtxt);
                    }
                }
                else {
                    td.html(txt);
                }
            });
        });
        $(".canChangeFour").click(function () {
            var td = $(this);
            //所点文本框的id
            var id = $(this).attr("id");
            // alert(id);return

            var txt = $.trim(td.text());

            var input = $("<input class=\"myinput\" id='new'  type='text'value='" + txt + "'style=\"width:65px;heigth:20px;\"/>");
            td.html(input);
            input.click(function () {
                return false;
            });
            //获取焦点
            input.trigger("focus");
            //文本框失去焦点后提交内容，重新变为文本
            input.blur(function () {
                // var newtxt = $(this).val();
                var newtxt = $("#new").val();

                // alert(newtxt);return
                //判断文本有没有修改
                if (newtxt != txt) {
                    if (newtxt == null || newtxt == "") {
                        td.html(txt);
                    }
                    else {
                        $.ajax({
                            type: "POST",
                            url: "{:url('home/order/update')}",
                            data: { 'id' : id , 'purchase' : newtxt ,'flas' : 4},  // 等号前后不要加空格

                        });
                        td.html(newtxt);
                    }
                }
                else {
                    td.html(txt);
                }
            });
        });

        $(".canChangeSex").click(function () {
            var td = $(this);
            //所点文本框的id
            var id = $(this).attr("id");
            // alert(id);return

            var txt = $.trim(td.text());

            var input = $("<input class=\"myinput\" id='new'  type='text'value='" + txt + "'style=\"width:135px;heigth:20px;\"/>");
            td.html(input);
            input.click(function () {
                return false;
            });
            //获取焦点
            input.trigger("focus");
            //文本框失去焦点后提交内容，重新变为文本
            input.blur(function () {
                // var newtxt = $(this).val();
                var newtxt = $("#new").val();

                // alert(newtxt);return
                //判断文本有没有修改
                if (newtxt != txt) {
                    if (newtxt == null || newtxt == "") {
                        td.html(txt);
                    }
                    else {
                        $.ajax({
                            type: "POST",
                            url: "{:url('home/order/update')}",
                            data: { 'id' : id , 'purchase' : newtxt ,'flas' : 5},  // 等号前后不要加空格


                        });
                        td.html(newtxt);
                    }
                }
                else {
                    td.html(txt);
                }
            });
        });

        // $(".canChangeWen").click(function () {
        //     var td = $(this);
        //     //所点文本框的id
        //     var id = $(this).attr("id");
        //     // alert(id);return
        //
        //     var txt = $.trim(td.text());
        //
        //     var input = $("<input class=\"myinput\" id='new'  type='text'value='" + txt + "'style=\"width:200px;heigth:20px;\"/>");
        //     td.html(input);
        //     input.click(function () {
        //         return false;
        //     });
        //     //获取焦点
        //     input.trigger("focus");
        //     //文本框失去焦点后提交内容，重新变为文本
        //     input.blur(function () {
        //         // var newtxt = $(this).val();
        //         var newtxt = $("#new").val();
        //
        //         // alert(newtxt);return
        //         //判断文本有没有修改
        //         if (newtxt != txt) {
        //             if (newtxt == null || newtxt == "") {
        //                 td.html(txt);
        //             }
        //             else {
        //                 $.ajax({
        //                     type: "POST",
        //                     url: "{:url('home/product/update')}",
        //                     data: { 'id' : id , 'purchase' : newtxt ,'flas' : 6},  // 等号前后不要加空格
        //
        //
        //                 });
        //                 td.html(newtxt);
        //             }
        //         }
        //         else {
        //             td.html(txt);
        //         }
        //     });
        // });
    }

</script>